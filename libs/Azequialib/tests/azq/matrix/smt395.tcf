environment["ti.bios.oldMemoryNames"] = true;

/* loading the generic platform */
var params = {};
params.clockRate = 1000.000000;
params.deviceName = "6416";
params.catalogName = "ti.catalog.c6000";
params.regs = {};
params.regs.l2Mode = "4-way cache (0k)";
utils.loadPlatform("ti.platforms.generic", params);


/* enabling DSP/BIOS components */
bios.GBL.ENABLEINST = true;
bios.MEM.NOMEMORYHEAPS = false;
bios.RTDX.ENABLERTDX = true;
bios.HST.HOSTLINKTYPE = "RTDX";
bios.TSK.ENABLETSK = true;
bios.GBL.ENABLEALLTRC = true;

bios.GBL.ENDIANMODE = "little";

bios.GBL.C641XCONFIGUREL2 = true;
bios.ISRAM.createHeap = true;
bios.ISRAM.heapSize = 0x8000;

bios.MEM.BIOSOBJSEG = prog.get("ISRAM");
bios.MEM.MALLOCSEG = prog.get("ISRAM");
bios.TSK.STACKSEG = prog.get("ISRAM");


/* applying user changes */
bios.SDRAM = bios.MEM.create("SDRAM");

bios.SDRAM.base = 0x80000000;

bios.SDRAM.len = 0x10000000;

bios.SDRAM.heapSize = 0xfffc000;

bios.SDRAM.enableHeapLabel = 1;

bios.SDRAM.heapLabel = prog.extern("SEG0");

bios.SDRAM.space = "code/data";

bios.VIRTEX = bios.MEM.create("VIRTEX");

bios.VIRTEX.base = 0xb0000000;

bios.VIRTEX.len = 0x100000;

bios.VIRTEX.createHeap = 0;

bios.stdout = bios.LOG.create("stdout");

bios.SEM0 = bios.SEM.create("SEM0");

bios.stsProcess = bios.STS.create("stsProcess");

bios.HOOK_idsp = bios.HOOK.create("HOOK_idsp");

bios.MEM.ARGSSIZE = 0x8;

bios.MEM.STACKSIZE = 0x1000;

bios.GBL.C641XMARCE0 = 0x3;

bios.GBL.ENABLEALLTRC = 0;

bios.GBL.C641XCCFGL2MODE = "4-way cache (256k)";

bios.GBL.ENABLEINST = 0;

bios.ISRAM.len = 0xc0000;

bios.ISRAM.heapSize = 0x60000;

bios.stdout.bufSeg = prog.get("ISRAM");

bios.stdout.bufLen = 0x800;

bios.HOOK_idsp.initFxn = prog.extern("hookInit");

bios.PRD_clock.order = 1;

bios.HWI_INT6.useDispatcher = 1;

bios.HWI_INT7.useDispatcher = 1;

bios.HWI_INT8.fxn = prog.extern("EDMA_ISR_isr");

bios.HWI_INT8.useDispatcher = 1;

bios.HWI_INT10.useDispatcher = 1;

bios.HWI_INT11.interruptSource = prog.get("MCSP_1_Receive");

bios.HWI_INT11.useDispatcher = 1;

bios.HWI_INT12.useDispatcher = 1;

bios.HWI_INT15.useDispatcher = 1;

bios.CACHE_L2.comment = "Generated by Cache Settings in GBL";

bios.CACHE_L2.base = 0xc0000;

bios.LOG.instance("stdout").destroy();
bios.LOG.create("LOG_stdout");
bios.LOG.instance("LOG_stdout").bufLen = 2048;
bios.LOG.create("LOG_stderr");
bios.LOG.instance("LOG_stderr").bufLen = 2048;
bios.GBL.INSTRUMENTED = 0;
bios.MEM.instance("ISRAM").heapSize = 0x00040000;
bios.HWI.instance("HWI_INT8").fxn = prog.extern("ISR_hwi");
bios.MEM.instance("ISRAM").heapSize = 0x00030000;
bios.MEM.instance("ISRAM").heapSize = 0x00040000;
bios.GBL.C641XCCFGL2MODE = "4-way cache (0k)";
bios.MEM.instance("ISRAM").len = 0x00100000;
// !GRAPHICAL_CONFIG_TOOL_SCRIPT_INSERT_POINT!

if (config.hasReportedError == false) {
    prog.gen();
}
